# Dopemux Production Environment Configuration
# Copy this file to .env and fill in your actual values
#
# SECURITY WARNING: Never commit .env files to git!
# All passwords and API keys should be generated fresh for production

# ===================================================================
# INFRASTRUCTURE PASSWORDS & SECURITY
# ===================================================================

# PostgreSQL Primary Database (Used by ConPort, MetaMCP, etc.)
# Generate: openssl rand -base64 32
POSTGRES_PASSWORD=your_postgres_password_here

# PostgreSQL AGE - Knowledge Graph Database (CONPORT-KG-2025)
# Generate: openssl rand -base64 32
AGE_DB_PASSWORD=your_age_postgres_password_here

# MySQL for Leantime
# Generate: openssl rand -base64 32
MYSQL_ROOT_PASSWORD=your_mysql_root_password_here
MYSQL_DATABASE=leantime
MYSQL_USER=leantime
MYSQL_PASSWORD=your_mysql_password_here

# Redis Authentication
# Generate: openssl rand -base64 32
REDIS_PASSWORD=your_redis_password_here

# Leantime Session Security
# Generate: openssl rand -base64 32
LEAN_SESSION_PASSWORD=your_leantime_session_password_here
LEAN_MCP_TOKEN=your_leantime_mcp_token_here

# ===================================================================
# AI API KEYS - Required for MCP Servers
# ===================================================================

# OpenAI (GPT models) - https://platform.openai.com/api-keys
# Used by: Zen MCP, GPT-Researcher, ConPort
OPENAI_API_KEY=sk-your_openai_api_key_here

# Anthropic Claude - https://console.anthropic.com/
# Used by: Zen MCP (optional), Task-Master AI
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here

# Google Gemini - https://makersuite.google.com/app/apikey
# Used by: Zen MCP (optional), ConPort
GEMINI_API_KEY=your_gemini_api_key_here
GOOGLE_API_KEY=your_gemini_api_key_here

# OpenRouter (Multi-model access) - https://openrouter.ai/keys
# Used by: Zen MCP (optional)
OPENROUTER_API_KEY=your_openrouter_api_key_here

# VoyageAI for Embeddings - https://www.voyageai.com/
# Used by: ConPort knowledge graph, Claude-Context
VOYAGEAI_API_KEY=your_voyageai_api_key_here
VOYAGE_API_KEY=your_voyageai_api_key_here

# Tavily for Research - https://tavily.com/
# Used by: GPT-Researcher MCP
TAVILY_API_KEY=your_tavily_api_key_here

# Perplexity AI - https://www.perplexity.ai/settings/api
# Used by: Research tasks (optional)
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Exa Search - https://exa.ai/
# Used by: Exa MCP server
EXA_API_KEY=your_exa_api_key_here

# Context7 - https://context7.com/
# Used by: Context7 MCP server for documentation
CONTEXT7_API_KEY=your_context7_api_key_here
CONTEXT7_ENDPOINT=your_context7_endpoint_here

# ===================================================================
# DOPEMUX CONFIGURATION
# ===================================================================

# Instance Configuration
DOPEMUX_INSTANCE=production
CONTAINER_PREFIX=dopemux

# Port Base (used for multi-instance setups)
PORT_BASE=3000

# Display for GUI applications (X11)
DISPLAY=:0

# ===================================================================
# SERVICE-SPECIFIC CONFIGURATION
# ===================================================================

# ConPort Memory Service
CONPORT_ENABLED=true
WEBSOCKET_PORT=8001
API_PORT=8000

# Serena LSP Configuration (ADHD Optimizations)
SERENA_MAX_RESULTS=10
SERENA_CONTEXT_DEPTH=3

# Zen MCP Configuration
# Disable unused tools to reduce overhead
DISABLED_TOOLS=analyze,refactor,testgen,secaudit,docgen,tracer
DEFAULT_MODEL=auto

# Vector Database Configuration (Milvus)
MILVUS_ADDRESS=milvus-standalone:19530
MILVUS_TOKEN=

# ===================================================================
# DEVELOPMENT & DEBUGGING
# ===================================================================

# Logging
LOG_LEVEL=INFO
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=true

# Telemetry
CLEAR_THOUGHT_TELEMETRY=off

# JVM Configuration (for Leantime)
JVM_HEAP_SIZE=512m

# ===================================================================
# EXTERNAL INTEGRATIONS
# ===================================================================

# MetaMCP Integration
# Generate: openssl rand -base64 32
NEXTAUTH_SECRET=your_metamcp_nextauth_secret_here
NEXTAUTH_URL=http://localhost:12008
APP_URL=http://localhost:12008

# Leantime API
LEAN_API_ENABLED=true

# ===================================================================
# NETWORK CONFIGURATION
# ===================================================================

# All services use the unified network: dopemux-unified-network
#
# Default Port Mappings:
# ┌─────────────────────────────────────────────────────────────┐
# │ MCP SERVERS                                                 │
# ├─────────────────────────────────────────────────────────────┤
# │ 3002 - Context7        │ Documentation & API references     │
# │ 3003 - Zen MCP         │ Multi-model orchestration         │
# │ 3004 - ConPort         │ Decision logging & memory         │
# │ 3006 - Serena LSP      │ Code navigation                   │
# │ 3007 - Claude Context  │ Milvus-backed context             │
# │ 3009 - GPT-Researcher  │ Research orchestration            │
# │ 3016 - Integration     │ Cross-plane coordination          │
# ├─────────────────────────────────────────────────────────────┤
# │ DATABASES                                                   │
# ├─────────────────────────────────────────────────────────────┤
# │ 5432 - PostgreSQL      │ Primary unified database          │
# │ 5455 - PostgreSQL AGE  │ ConPort knowledge graph           │
# │ 3306 - MySQL           │ Leantime database                 │
# │ 6379 - Redis Primary   │ Event bus & general cache         │
# │ 6380 - Redis Leantime  │ Leantime-specific cache           │
# │ 19530 - Milvus         │ Vector database (embeddings)      │
# ├─────────────────────────────────────────────────────────────┤
# │ WEB INTERFACES                                              │
# ├─────────────────────────────────────────────────────────────┤
# │ 8080 - Leantime        │ Project management UI             │
# │ 8081 - Redis Commander │ Redis management UI               │
# │ 9000 - Minio API       │ Object storage for Milvus         │
# │ 9001 - Minio Console   │ Minio management UI               │
# └─────────────────────────────────────────────────────────────┘

# ===================================================================
# ADHD OPTIMIZATIONS
# ===================================================================

# Session Configuration
# Auto-save interval (seconds) - 30s default for ADHD support
SESSION_AUTO_SAVE_INTERVAL=30

# Task Chunking - 25-minute Pomodoro segments
POMODORO_DURATION=1500

# Progressive Disclosure - Max options shown at once
MAX_DECISION_OPTIONS=3

# ===================================================================
# PRODUCTION DEPLOYMENT NOTES
# ===================================================================
#
# 1. SECURITY CHECKLIST:
#    □ Generate all passwords with: openssl rand -base64 32
#    □ Obtain API keys from respective service providers
#    □ Never use default passwords in production
#    □ Restrict database access to localhost or private network
#    □ Enable firewall rules for exposed ports
#
# 2. REQUIRED API KEYS (Minimum for basic functionality):
#    ✓ OPENAI_API_KEY - For GPT models (Zen, GPT-Researcher)
#    ✓ VOYAGEAI_API_KEY - For embeddings (ConPort knowledge graph)
#    ✓ TAVILY_API_KEY - For research (GPT-Researcher)
#
# 3. OPTIONAL API KEYS (Enhanced functionality):
#    ○ ANTHROPIC_API_KEY - Claude models
#    ○ GEMINI_API_KEY - Google models
#    ○ CONTEXT7_API_KEY - Documentation access
#    ○ EXA_API_KEY - Neural search
#
# 4. DEPLOYMENT COMMANDS:
#    # First time setup
#    cp .env.example .env
#    # Edit .env with your values
#    nano .env
#    # Create network if needed
#    docker network create dopemux-unified-network
#    # Start services
#    docker-compose -f docker-compose.unified.yml up -d
#    # Check health
#    docker-compose -f docker-compose.unified.yml ps
#
# 5. BACKUP STRATEGY:
#    Run ./scripts/backup-conport-kg.sh daily (cron recommended)
#    Backup locations:
#    - PostgreSQL AGE: /backups/dopemux-age/
#    - PostgreSQL Primary: /backups/dopemux-postgres/
#    - Redis: /backups/dopemux-redis/
#
# 6. MONITORING:
#    - Health checks: http://localhost:3016/health (Integration Bridge)
#    - Redis Commander: http://localhost:8081
#    - Leantime: http://localhost:8080
#    - Minio Console: http://localhost:9001
#
