# MetaMCP Environment Configuration for Dopemux
# ADHD-Optimized Development Platform Integration

# ===========================================
# METAMCP CORE SETTINGS
# ===========================================

# Application Configuration
APP_URL=http://localhost:12008
NODE_ENV=production
PORT=3000

# Database Configuration
DATABASE_URL=postgresql://metamcp:metamcp_secure_2024@metamcp-postgres:5432/metamcp

# Authentication
NEXTAUTH_SECRET=dopemux_metamcp_auth_secret_2024_secure_key_random_generated
NEXTAUTH_URL=http://localhost:12008

# ===========================================
# LLM PROVIDER API KEYS
# ===========================================

# Primary LLM Providers
OPENAI_API_KEY=${OPENAI_API_KEY}
DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
GROQ_API_KEY=${GROQ_API_KEY}
OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
XAI_API_KEY=${XAI_API_KEY}
GEMINI_API_KEY=${GEMINI_API_KEY}
AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
MISTRAL_API_KEY=${MISTRAL_API_KEY}

# Secondary Providers
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}
HUGGINGFACE_API_KEY=${HUGGINGFACE_API_KEY}
REPLICATE_API_KEY=${REPLICATE_API_KEY}

# ===========================================
# MCP SERVER INTEGRATION KEYS
# ===========================================

# External Service Keys
CONTEXT7_API_KEY=${CONTEXT7_API_KEY}
EXA_API_KEY=${EXA_API_KEY}
VOYAGEAI_API_KEY=${VOYAGEAI_API_KEY}
GITHUB_TOKEN=${GITHUB_TOKEN}

# Vector Database Keys
PINECONE_API_KEY=${PINECONE_API_KEY}
WEAVIATE_API_KEY=${WEAVIATE_API_KEY}

# Additional Service Keys
BROWSERLESS_API_KEY=${BROWSERLESS_API_KEY}
SERPAPI_KEY=${SERPAPI_KEY}
TAVILY_API_KEY=${TAVILY_API_KEY}

# ===========================================
# METAMCP FEATURE CONFIGURATION
# ===========================================

# Authentication Settings
ENABLE_AUTH=true
ENABLE_API_KEYS=true
ENABLE_OAUTH=true
ENABLE_OIDC=false

# API Key Management
API_KEY_PREFIX=sk_mt_
API_KEY_LENGTH=32
ENABLE_API_KEY_ROTATION=true

# Monitoring and Observability
ENABLE_MONITORING=true
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_LOGGING=true

# Performance Settings
RESPONSE_TIMEOUT=30000
MAX_CONCURRENT_REQUESTS=10
ENABLE_CIRCUIT_BREAKER=true
ENABLE_REQUEST_QUEUING=true
QUEUE_MAX_SIZE=100

# Caching Configuration
ENABLE_CACHING=true
CACHE_TTL=3600
REDIS_URL=redis://metamcp-redis:6379
CACHE_MAX_SIZE=100MB

# ===========================================
# ADHD OPTIMIZATION SETTINGS
# ===========================================

# Response Time Targets (milliseconds)
TARGET_RESPONSE_TIME_FAST=500
TARGET_RESPONSE_TIME_NORMAL=2000
TARGET_RESPONSE_TIME_COMPLEX=10000

# Cognitive Load Management
MAX_TOOLS_PER_ROLE=5
MAX_DECISION_TIME=5000
ENABLE_GENTLE_NOTIFICATIONS=true
ENABLE_PROGRESS_VISUALIZATION=true

# Context Preservation
AUTO_SAVE_INTERVAL=30
MAX_CONTEXT_HISTORY=100
ENABLE_CONTEXT_COMPRESSION=true
CONTEXT_COMPRESSION_THRESHOLD=50

# Flow State Protection
ENABLE_FLOW_STATE_PROTECTION=true
MIN_UNINTERRUPTED_TIME=1500
MAX_INTERRUPTION_FREQUENCY=3

# ===========================================
# TOKEN OPTIMIZATION SETTINGS
# ===========================================

# Budget Management
ENABLE_TOKEN_TRACKING=true
ENABLE_BUDGET_ALERTS=true
WARNING_THRESHOLD=0.8
CRITICAL_THRESHOLD=0.95

# Role-Based Budgets (tokens per session)
BUDGET_DEVELOPER=15000
BUDGET_RESEARCHER=10000
BUDGET_ARCHITECT=25000
BUDGET_REVIEWER=15000
BUDGET_DEBUGGER=12000
BUDGET_PLANNER=8000
BUDGET_OPS=6000

# Optimization Features
ENABLE_SMART_CACHING=true
ENABLE_QUERY_OPTIMIZATION=true
ENABLE_BULK_DETECTION=true
ENABLE_PROGRESSIVE_DISCLOSURE=true

# Context7 First Policy
ENFORCE_CONTEXT7_FIRST=true
CONTEXT7_CACHE_TTL=3600
PREVENT_API_HALLUCINATION=true

# ===========================================
# SECURITY SETTINGS
# ===========================================

# CORS Configuration
CORS_ORIGIN=http://localhost:12008,http://localhost:3000
CORS_CREDENTIALS=true

# Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW=3600000
RATE_LIMIT_MAX=1000

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_HELMET=true
ENABLE_CSP=true

# Session Management
SESSION_SECRET=dopemux_session_secret_2024_secure_random_key
SESSION_TIMEOUT=86400
ENABLE_SESSION_ROTATION=true

# ===========================================
# LOGGING AND MONITORING
# ===========================================

# Log Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=true
LOG_RETENTION_DAYS=30

# Metrics Collection
METRICS_ENDPOINT=/metrics
ENABLE_PROMETHEUS_METRICS=true
METRICS_COLLECTION_INTERVAL=15

# Health Checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
ENABLE_DEPENDENCY_HEALTH=true

# Error Tracking
ENABLE_SENTRY=false
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================

# Debug Configuration
ENABLE_DEBUG_MODE=false
ENABLE_VERBOSE_LOGGING=false
ENABLE_DEVELOPMENT_CORS=false

# Hot Reload (Development Only)
ENABLE_HOT_RELOAD=false
WATCH_FILES=false

# Testing
ENABLE_TEST_MODE=false
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/metamcp_test

# ===========================================
# INTEGRATION SETTINGS
# ===========================================

# Leantime Integration
LEANTIME_API_URL=http://host.docker.internal:8080
LEANTIME_API_TOKEN=${LEANTIME_API_TOKEN}
ENABLE_LEANTIME_SYNC=true

# ConPort Integration
CONPORT_API_URL=http://mcp-conport:3004
ENABLE_CONPORT_CONTEXT=true

# Custom Broker Integration
CUSTOM_BROKER_URL=http://host.docker.internal:8090
ENABLE_CUSTOM_BROKER=true

# ===========================================
# PERFORMANCE TUNING
# ===========================================

# Memory Management
NODE_OPTIONS="--max_old_space_size=2048"
HEAP_SIZE_LIMIT=2048
ENABLE_MEMORY_MONITORING=true

# Connection Pooling
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT=30000

# Request Processing
REQUEST_TIMEOUT=30000
REQUEST_SIZE_LIMIT=10mb
ENABLE_COMPRESSION=true

# Background Jobs
ENABLE_BACKGROUND_JOBS=true
JOB_CONCURRENCY=5
JOB_RETRY_ATTEMPTS=3

# ===========================================
# NAMESPACE CONFIGURATION
# ===========================================

# Default Namespaces
DEFAULT_NAMESPACES=reference,development,research,planning,quality,automation

# Namespace-Specific Settings
NAMESPACE_REFERENCE_BUDGET=unlimited
NAMESPACE_DEVELOPMENT_BUDGET=15000
NAMESPACE_RESEARCH_BUDGET=10000
NAMESPACE_PLANNING_BUDGET=25000
NAMESPACE_QUALITY_BUDGET=15000
NAMESPACE_AUTOMATION_BUDGET=8000

# Tool Filtering
ENABLE_TOOL_FILTERING=true
MAX_TOOLS_PER_NAMESPACE=5
ENABLE_TOOL_PRIORITY=true

# ===========================================
# BACKUP AND RECOVERY
# ===========================================

# Database Backup
ENABLE_AUTO_BACKUP=true
BACKUP_INTERVAL=86400
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}

# Configuration Backup
ENABLE_CONFIG_BACKUP=true
CONFIG_BACKUP_INTERVAL=3600

# Disaster Recovery
ENABLE_DISASTER_RECOVERY=true
RECOVERY_POINT_OBJECTIVE=3600
RECOVERY_TIME_OBJECTIVE=900